# Claude Code Slack Bot Configuration
#
# This bot provides remote access to Claude Code through Slack with:
# - Conversational AI coding assistant interface
# - File upload and archive extraction
# - Git repository integration
# - Quick action buttons for common tasks
# - Session export in multiple formats
# - Image/screenshot analysis

# === AUTHENTICATION SETUP ===
# Choose one of these Claude authentication methods:
#
# Option 1 (Recommended): Use existing Claude CLI authentication
# 1. Install Claude CLI: https://claude.ai/code
# 2. Login: claude auth login
# 3. Set USE_SDK=true (leave ANTHROPIC_API_KEY empty)
#
# Option 2: Direct API key
# 1. Get API key from: https://console.anthropic.com/
# 2. Set USE_SDK=true and ANTHROPIC_API_KEY=your-key

# === REQUIRED SETTINGS ===
# Slack Bot User OAuth Token (xoxb-...)
# Get from: https://api.slack.com/apps → OAuth & Permissions
SLACK_BOT_TOKEN=

# Slack App-Level Token for Socket Mode (xapp-...)
# Get from: https://api.slack.com/apps → Basic Information → App-Level Tokens
# Required scopes: connections:write
SLACK_APP_TOKEN=
# Slack Signing Secret (optional, for future HTTP mode)
# Get from: https://api.slack.com/apps → Basic Information
SLACK_SIGNING_SECRET=

# Bot display name for mention detection (used in require_mention channels)
BOT_NAME=claude

# Base directory for project access (absolute path)
APPROVED_DIRECTORY=/path/to/your/projects

# === SECURITY SETTINGS ===
# Comma-separated list of allowed Slack user IDs (optional)
# Find user IDs in Slack: click user profile → "..." → "Copy member ID"
# Leave empty to allow all users (not recommended for production)
ALLOWED_USERS=U01ABC123,U04XYZ789

# Secret for generating auth tokens (required if ENABLE_TOKEN_AUTH=true)
# Generate with: openssl rand -hex 32
AUTH_TOKEN_SECRET=

# Disable dangerous pattern validation in path/command checks (trusted env only)
DISABLE_SECURITY_PATTERNS=false

# Disable Claude tool allowlist/disallowlist validation (trusted env only)
DISABLE_TOOL_VALIDATION=false

# Development mode: allow access outside APPROVED_DIRECTORY with warnings (never in production)
# DEVELOPMENT_MODE=false

# === CLAUDE SETTINGS ===
# Integration method: Use Python SDK (true) or CLI subprocess (false)
USE_SDK=true

# Claude model to use (e.g. claude-sonnet-4-6, claude-opus-4-6)
CLAUDE_MODEL=claude-sonnet-4-6

# Anthropic API key for SDK integration (optional if using CLI authentication via `claude login`)
ANTHROPIC_API_KEY=

# Path to Claude CLI executable (optional - will auto-detect if not specified)
CLAUDE_CLI_PATH=

# Maximum conversation turns before requiring new session
CLAUDE_MAX_TURNS=10

# Timeout for Claude operations (seconds)
CLAUDE_TIMEOUT_SECONDS=300

# Maximum cost per user in USD
CLAUDE_MAX_COST_PER_USER=10.0

# Allowed Claude tools (comma-separated list)
CLAUDE_ALLOWED_TOOLS=Read,Write,Edit,Bash,Glob,Grep,LS,Task,TaskOutput,MultiEdit,NotebookRead,NotebookEdit,WebFetch,TodoRead,TodoWrite,WebSearch,AskUserQuestion,Skill,ScheduleJob,ListScheduledJobs,RemoveScheduledJob,SlackFileUpload,SlackReaction

# === RATE LIMITING ===
RATE_LIMIT_REQUESTS=10
RATE_LIMIT_WINDOW=60
RATE_LIMIT_BURST=20

# === STORAGE SETTINGS ===
DATABASE_URL=sqlite:///data/bot.db
SESSION_TIMEOUT_HOURS=24
MAX_SESSIONS_PER_USER=5

# === FEATURE FLAGS ===
ENABLE_MCP=false
MCP_CONFIG_PATH=
ENABLE_GIT_INTEGRATION=true
ENABLE_FILE_UPLOADS=true
ENABLE_QUICK_ACTIONS=true

# === ADVANCED FEATURE SETTINGS ===
MAX_FILE_UPLOAD_SIZE_MB=100
MAX_ARCHIVE_PREVIEW_FILES=5
ENABLE_SESSION_EXPORT=true
ENABLE_IMAGE_UPLOADS=true
ENABLE_CONVERSATION_MODE=true
QUICK_ACTIONS_TIMEOUT=120
GIT_OPERATIONS_TIMEOUT=30

# === PROJECT CHANNEL MODE ===
# Enable strict routing by Slack project channels
ENABLE_PROJECT_CHANNELS=false

# Path to YAML project registry (see config/projects.example.yaml)
PROJECTS_CONFIG_PATH=

# === AGENTIC PLATFORM ===
# Enable FastAPI webhook server for external integrations
ENABLE_API_SERVER=false
API_SERVER_PORT=8080
GITHUB_WEBHOOK_SECRET=
WEBHOOK_API_SECRET=

# Enable job scheduler for cron-based tasks
ENABLE_SCHEDULER=false
# IANA timezone for cron schedules (default: America/Los_Angeles)
SCHEDULER_TIMEZONE=America/Los_Angeles

# Default Slack channel IDs for proactive notifications (comma-separated)
NOTIFICATION_CHANNEL_IDS=

# === MONITORING ===
LOG_LEVEL=INFO
ENABLE_TELEMETRY=false
SENTRY_DSN=

# === DEVELOPMENT ===
ENVIRONMENT=development
DEBUG=false
DEVELOPMENT_MODE=true
